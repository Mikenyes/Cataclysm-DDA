[
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_ALPHA",
    "effect": [
      { "u_mutate_category": "ALPHA", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_BATRACHIAN",
    "effect": [
      { "u_mutate_category": "BATRACHIAN", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_BEAST",
    "effect": [
      { "u_mutate_category": "BEAST", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_BIRD",
    "effect": [
      { "u_mutate_category": "BIRD", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_CATTLE",
    "effect": [
      { "u_mutate_category": "CATTLE", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_CEPHALOPOD",
    "effect": [
      { "u_mutate_category": "CEPHALOPOD", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_CHIMERA",
    "effect": [
      { "u_mutate_category": "CHIMERA", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_ELFA",
    "effect": [
      { "u_mutate_category": "ELFA", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_FELINE",
    "effect": [
      { "u_mutate_category": "FELINE", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_FISH",
    "effect": [
      { "u_mutate_category": "FISH", "use_vitamins": false }
    ]
  },
    {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_GASTROPOD",
    "effect": [
      { "u_mutate_category": "GASTROPOD", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_HUMAN",
    "effect": [
      { "u_mutate_category": "HUMAN", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_INSECT",
    "effect": [
      { "u_mutate_category": "INSECT", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_LIZARD",
    "effect": [
      { "u_mutate_category": "LIZARD", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_LUPINE",
    "effect": [
      { "u_mutate_category": "LUPINE", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_MEDICAL",
    "effect": [
      { "u_mutate_category": "MEDICAL", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_MOUSE",
    "effect": [
      { "u_mutate_category": "MOUSE", "use_vitamins": false }
    ]
  },
    {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_PLANT",
    "effect": [
      { "u_mutate_category": "PLANT", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_RAPTOR",
    "effect": [
      { "u_mutate_category": "RAPTOR", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_RABBIT",
    "effect": [
      { "u_mutate_category": "RABBIT", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_RAT",
    "effect": [
      { "u_mutate_category": "RAT", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_SLIME",
    "effect": [
      { "u_mutate_category": "SLIME", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_SPIDER",
    "effect": [
      { "u_mutate_category": "SPIDER", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_TROGLOBITE",
    "effect": [
      { "u_mutate_category": "TROGLOBITE", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_URSINE",
    "effect": [
      { "u_mutate_category": "URSINE", "use_vitamins": false }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MUTATE_DDA",
    "//": "Mutate once in any DDA sourced category, including human.  Please add new mutation categories to this list.",
    "effect": [
      { 
        "weighted_list_eocs": [
          [ "EOC_MUTATE_ALPHA", { "const": 1 } ],
          [ "EOC_MUTATE_BATRACHIAN", { "const": 1 } ],
          [ "EOC_MUTATE_BEAST", { "const": 1 } ],
          [ "EOC_MUTATE_BIRD", { "const": 1 } ],
          [ "EOC_MUTATE_CATTLE", { "const": 1 } ],
          [ "EOC_MUTATE_CEPHALOPOD", { "const": 1 } ],
          [ "EOC_MUTATE_CHIMERA", { "const": 1 } ],
          [ "EOC_MUTATE_ELFA", { "const": 1 } ],
          [ "EOC_MUTATE_FELINE", { "const": 1 } ],
          [ "EOC_MUTATE_FISH", { "const": 1 } ],
          [ "EOC_MUTATE_GASTROPOD", { "const": 1 } ],
          [ "EOC_MUTATE_HUMAN", { "const": 1 } ],
          [ "EOC_MUTATE_INSECT", { "const": 1 } ],
          [ "EOC_MUTATE_LIZARD", { "const": 1 } ],
          [ "EOC_MUTATE_LUPINE", { "const": 1 } ],
          [ "EOC_MUTATE_MEDICAL", { "const": 1 } ],
          [ "EOC_MUTATE_MOUSE", { "const": 1 } ],
          [ "EOC_MUTATE_PLANT", { "const": 1 } ],
          [ "EOC_MUTATE_RABBIT", { "const": 1 } ],
          [ "EOC_MUTATE_RAPTOR", { "const": 1 } ],
          [ "EOC_MUTATE_RAT", { "const": 1 } ],
          [ "EOC_MUTATE_SLIME", { "const": 1 } ],
          [ "EOC_MUTATE_SPIDER", { "const": 1 } ],
          [ "EOC_MUTATE_TROGLOBITE", { "const": 1 } ],
          [ "EOC_MUTATE_URSINE", { "const": 1 } ]
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THRESH_ELFA_ACTIVATED",
    "//": "This is actually a lot closer to a very dangerous intoxicant than anything benign or mystical.",
    "condition": { "compare_int": [ { "u_val": "vitamin", "name": "mutagen_elfa" }, ">=", { "const": 500 } ] },
    "effect": [
      { "u_assign_activity": "ACT_GENERIC_EOC", "duration": "5 seconds" },
      { "arithmetic": [ { "u_val": "vitamin", "name": "mutagen_elfa" }, "-=", { "const": 350 } ] },
      { "u_message": "Pollen, the purest language.  You focus, releasing a cloud that conveys your goodwill and kind intent.", "type": "good" },
      {
        "u_run_npc_eocs": [
          {
            "id": "EOC_THRESH_ELFA_POLLEN_A",
            "condition": { "not": { "u_has_trait": "ELFA_INTOXICATION" } },
            "effect": [
              { "u_make_sound": "a wet, bloody cough.", "volume": 20, "type": "combat" },
              { "u_add_trait": "ELFA_INTOXICATION" },
              { "arithmetic": [ { "u_val": "npc_trust" }, "+=", { "const": 3 } ] },
              { "arithmetic": [ { "u_val": "npc_fear" }, "+=", { "const": 3 } ] },
              { "u_mod_healthy": -10, "cap": -75 }
            ],
            "false_effect": [
              { "u_make_sound": "a blood-choked laugh.", "volume": 20, "type": "combat" },
              { "u_lose_trait": "ELFA_INTOXICATION" },
              { "u_add_trait": "ELFA_INTOXICATION2" },
              { "arithmetic": [ { "u_val": "npc_trust" }, "+=", { "const": 5 } ] },
              { "u_mod_healthy": -35, "cap": -75 }
            ]
          }
        ],
        "npc_range": 6
      }
    ],
    "false_effect": [ { "u_message": "You don't have enough glorious mutagen to persuade your vassals.", "type": "bad" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THRESH_ELFA",
    "//": "Happy little amphetamine spores.  NPCs that remain near you do not sleep, at the cost of sleep deprivation.",
    "recurrence": [ "30 m", "1 h" ],
    "condition": { "u_has_trait": "THRESH_ELFA" },
    "deactivate_condition": { "not": { "u_has_trait": "THRESH_ELFA" } },
    "effect": [
      {
        "u_run_npc_eocs": [
          {
            "id": "EOC_THRESH_ELFA_POLLEN_B",
            "effect": [
              { "u_add_morale": "morale_support", "bonus": 5, "max_bonus": 30, "duration": "4 h", "decay_start": "2 h" },
              { "arithmetic": [ { "u_val": "fatigue" }, "-=", { "const": 20 } ], "min": 0 },
              { "arithmetic": [ { "u_val": "sleep_deprivation" }, "+=", { "const": 35 } ] }
            ]
          }
        ],
        "npc_range": 25
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THRESH_CHIMERA_ACTIVATED",
    "effect": [
      { "arithmetic": [ { "u_val": "pain" }, "+=", { "const": 35 } ] },
      {
        "run_eocs": [
          "EOC_THRESH_CHIMERA"
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THRESH_CHIMERA",
    "//": "Shuffle with no need for catalyst.",
    "recurrence": [ "23 h", "25 h" ],
    "condition": { "u_has_trait": "THRESH_CHIMERA" },
    "deactivate_condition": { "not": { "u_has_trait": "THRESH_CHIMERA" } },
    "effect": [
      { "u_message": "You're changing again.  Wonderful!", "type": "good" },
      { "arithmetic": [ { "u_val": "vitamin", "name": "instability" }, "+=", { "const": 550 } ] },
      {
        "run_eocs": [
          "EOC_MUTATE_HUMAN",
          "EOC_MUTATE_HUMAN",
          "EOC_MUTATE_HUMAN",
          "EOC_MUTATE_HUMAN",
          "EOC_MUTATE_HUMAN",
          "EOC_MUTATE_DDA",
          "EOC_MUTATE_DDA",
          "EOC_MUTATE_DDA",
          "EOC_MUTATE_DDA",
          "EOC_MUTATE_DDA"
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_THRESH_TROGLOBITE",
    "//": "Outside?  What's that?",
    "recurrence": [ "30 m", "45 m" ],
    "condition": { "u_has_trait": "THRESH_TROGLOBITE" },
    "deactivate_condition": { "not": { "u_has_trait": "THRESH_TROGLOBITE" } },
    "effect": [
      {
        "run_eocs": [
          {
            "id": "EOC_THRESH_TROGLOBITE_SURFACE",
            "condition": "u_is_outside",
            "effect": [
              { "u_add_morale": "morale_troglobite_surface", "bonus": -20, "max_bonus": -90, "duration": "4 h", "decay_start": "1 h" }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ADRENALINE2_ACTIVATED",
    "effect": [
      { "arithmetic": [ { "u_val": "vitamin", "name": "mutant_toxin" }, "+=", { "const": 96 } ] },
      { "arithmetic": [ { "u_val": "stamina" }, "*=", { "const": 2 } ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BIOLUM3_activated",
    "condition": { "compare_int": [ { "u_val": "stamina" }, ">=", { "const": 3000 } ] },
    "effect": [
      { "u_assign_activity": "ACT_GENERIC_EOC", "duration": "3 seconds" },
      { "arithmetic": [ { "u_val": "stamina" }, "-=", { "const": 700 } ] },
      { "queue_eocs": [ "EOC_BIOLUM3_cast" ], "time_in_future": 2 }
    ],
    "false_effect": [ { "u_message": "You don't have enough stamina to activate your Bioluminescent Flare.", "type": "bad" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BIOLUM3_cast",
    "effect": [
      {
        "u_cast_spell": { "id": "spell_spit_flare", "message": "You launch a glob of bioluminescent material!" },
        "targeted": true
      }
    ]
  }
]
